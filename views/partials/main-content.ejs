<!--main-content.ejs-->
<div class="content">

  <style>
    .content .posts{
      display:grid;
      grid-template-columns: 15.73% 15.73% 15.73% 15.73% 15.73% 15.73%;
      grid-gap:10px;
      padding-bottom:30px;
      margin-bottom:30px;
      border-bottom:2px solid grey;
    }
    .content .posts .post-content img{
      width:100%;
    }
    .content .post-wrapper{
      position:relative;
      overflow:hidden;
    }
    .content .posts #post-wrapper0{
      grid-column: 1 / span 3;
      font-size:16px;
    }
    .content .posts #post-wrapper1{
      grid-column: 4 / span 3;
      font-size:16px;
    }
    .content .posts #post-wrapper2{
      grid-column: 1 / span 2;
    }
    .content .posts #post-wrapper3{
      grid-column: 3 / span 2;
    }
    .content .posts #post-wrapper4{
      grid-column: 5 / span 2;
    }
    .content .post-title,.content .post-date{
      position:absolute;
      color:white;
      text-shadow: 2px 2px 4px #000000;
      background: -webkit-linear-gradient(bottom, black,transparent);
      background: -o-linear-gradient(bottom, black,transparent);
      background: -moz-linear-gradient(bottom, black,transparent);
      background: linear-gradient(bottom, black,transparent);
      padding:10px 5px 5px;
    }
    .content .post-title{
      bottom:0;
      line-height:1.5;
    }
    .content .post-date{
      background:none;
      right:5px;
      padding-top:5px;
    }
    .content .post-title-columns{
      font:20px/1.5 Bayon;
      margin-bottom:20px;
    }
    .post-columns{
      column-count: 3;
    }
    @media only screen and (max-width: 768px){
      .content .posts{
        grid-template-columns: 100%;
      }
      .content .posts #post-wrapper0{
      grid-column: 1 ;
      font-size:16px;
      }
     .content .posts #post-wrapper1{
      grid-column: 1;
      font-size:16px;
     }
     .content .posts #post-wrapper2{
      grid-column: 1;
     }
     .content .posts #post-wrapper3{
      grid-column: 1;
     }
     .content .posts #post-wrapper4{
      grid-column: 1;
     }
     .post-columns{
      column-count: 1;
    }
    }
    
  </style>

  <div class="posts">
    <% for(var i=0; i < 5; i++) { %>
    
    <div id="post-wrapper<%= i %>" class="post-wrapper">
      
      <div class="post-title">
        <%- postlist[i].title %>
      </div>
  
      <div class="post-date">
        <script>
          document.write(__KBobject__.elapTime(new Date('<%- postlist[i].date %>')));
        </script>
      </div>
      <a href="/post/<%= postlist[i]._id %>" >
      <div id="post-content<%= i %>" class="post-content">
        <%- postlist[i].content %>
      </div>
      </a>
    </div><!--post-wrapper-->
    
    <script>
      var thumb = __KBobject__.createThumb($('#post-content<%= i %>').html());
      $('#post-content<%= i %>').html('<img src="'+thumb+'" />');
      var width = $('#post-wrapper<%= i %>').css('width');
      var height = parseInt(width)/16*9;
      $('#post-wrapper<%= i %>').css('height', height);
    </script>
    <% } %>
  </div><!--posts-->

  <div class="post-columns">
    <div class="post-title-columns">
      <%- postlist[5].title %>
    </div>

    <div class="post-date-columns">
      <script>
        document.write(__KBobject__.getKhDate(new Date('<%- postlist[5].date %>')));
      </script>
    </div>

    <div  class="post-content-columns">
      <%- postlist[5].content %>
    </div>

  </div>

</div><!--content-->

  
<script>
  $(window).resize(function(){
    var width = $('#post-wrapper0').css('width');
    var height = parseInt(width)/16*9;
    $('#post-wrapper0').css('height',height);
    $('#post-wrapper1').css('height',height);
    var width = $('#post-wrapper2').css('width');
    var height = parseInt(width)/16*9;
    $('#post-wrapper2').css('height',height);
    $('#post-wrapper3').css('height',height);
    $('#post-wrapper4').css('height',height);
  });
</script>